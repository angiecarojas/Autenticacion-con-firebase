{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\claus\\\\OneDrive\\\\Escritorio\\\\parcial\\\\CRUD-with-ReactJs-and-Firebase-Firestore-y-Auth--master\\\\src\\\\Components\\\\Login.jsx\";\nimport React from \"react\";\nimport { db, auth } from \"../firebase\";\nimport { withRouter } from \"react-router-dom\";\n\nconst Login = props => {\n  // Creando los states de los campos\n  const [email, setEmail] = React.useState(\"\");\n  const [pass, setPass] = React.useState(\"\");\n  const [mensaje, setMensaje] = React.useState(\"\");\n  const [esRegistro, setEsRegistro] = React.useState(true);\n  const registrarUsuario = React.useCallback(async () => {\n    try {\n      const res = await auth.createUserWithEmailAndPassword(email, pass);\n      await db.collection(\"users\").doc(res.user.uid).set({\n        email: res.user.email,\n        uid: res.user.uid\n      });\n      await db.collection(res.user.uid).add({\n        name: \"Tarea de ejjemplo\",\n        fecha: Date.now()\n      });\n      setEmail(\"\");\n      setPass(\"\");\n      setMensaje(\"\");\n      props.history.push(\"/admin\");\n    } catch (error) {\n      console.log(error);\n      setMensaje(error.message);\n    }\n  }, [email, pass, props.history]);\n  const iniciarSesion = React.useCallback(async () => {\n    try {\n      await auth.signInWithEmailAndPassword(email, pass);\n      setEmail(\"\");\n      setPass(\"\");\n      setMensaje(\"\");\n      props.history.push(\"/admin\");\n    } catch (error) {\n      setMensaje(error.message);\n      return;\n    }\n  }, [email, pass, props.history]); //Funcion para validar los datos del formulario\n\n  const procesarDatos = e => {\n    e.preventDefault();\n\n    if (!email.trim()) {\n      setMensaje(\"Ingrese un email\");\n      return;\n    }\n\n    if (!pass.trim()) {\n      setMensaje(\"Ingrese una contraseña\");\n      return;\n    }\n\n    if (pass.length < 6) {\n      setMensaje(\"La contraseña debe tener al menos 6 caracteres\");\n      return;\n    }\n\n    setMensaje(\"\");\n    console.log(\"validando todo\");\n\n    if (esRegistro) {\n      registrarUsuario();\n    } else {\n      iniciarSesion();\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container mx-auto mt-10\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"text-center font-bold text-2xl mb-10\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }\n  }, esRegistro ? \"Registro de usuarios\" : \"Inicia sesión\"), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: procesarDatos,\n    className: \"mt-10 w-11/12 md:w-5/6 lg:w-3/5 xl:w-1/2 mx-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }\n  }, mensaje.length > 0 ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"p-4 bg-red-300 text-red-600 block w-3/4 mx-auto mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 11\n    }\n  }, mensaje) : null, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"email\",\n    placeholder: \"Ingrese un email\",\n    name: \"email\",\n    className: \"focus:outline-none bg-transparent text-xl border-b-2 border-blue-400 w-3/4 mx-auto mb-5 block\",\n    onChange: e => setEmail(e.target.value),\n    value: email,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    placeholder: \"Ingrese su contrase\\xF1a\",\n    name: \"password\",\n    className: \"focus:outline-none bg-transparent text-xl border-b-2 border-blue-400 w-3/4 mx-auto mb-5 block\",\n    onChange: e => setPass(e.target.value),\n    value: pass,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"block p-4 border-b-4 bg-gray-700 border-red-900 rounded text-white w-3/4 mb-5 mx-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }\n  }, esRegistro ? \"Registrar\" : \"Acceder\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: () => setEsRegistro(!esRegistro),\n    className: \"block p-3 border-b-4 bg-blue-500 border-blue-700 rounded text-white w-3/4 mx-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 9\n    }\n  }, esRegistro ? \"¿Ya tienes una cuenta?\" : \"¿No estas registrado?\")));\n};\n\nexport default withRouter(Login);","map":{"version":3,"sources":["C:/Users/claus/OneDrive/Escritorio/parcial/CRUD-with-ReactJs-and-Firebase-Firestore-y-Auth--master/src/Components/Login.jsx"],"names":["React","db","auth","withRouter","Login","props","email","setEmail","useState","pass","setPass","mensaje","setMensaje","esRegistro","setEsRegistro","registrarUsuario","useCallback","res","createUserWithEmailAndPassword","collection","doc","user","uid","set","add","name","fecha","Date","now","history","push","error","console","log","message","iniciarSesion","signInWithEmailAndPassword","procesarDatos","e","preventDefault","trim","length","target","value"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { db, auth } from \"../firebase\";\nimport { withRouter } from \"react-router-dom\";\nconst Login = (props) => {\n  // Creando los states de los campos\n  const [email, setEmail] = React.useState(\"\");\n  const [pass, setPass] = React.useState(\"\");\n  const [mensaje, setMensaje] = React.useState(\"\");\n  const [esRegistro, setEsRegistro] = React.useState(true);\n\n  const registrarUsuario = React.useCallback(async () => {\n    try {\n      const res = await auth.createUserWithEmailAndPassword(email, pass);\n      await db.collection(\"users\").doc(res.user.uid).set({\n        email: res.user.email,\n        uid: res.user.uid,\n      });\n      await db.collection(res.user.uid).add({\n        name: \"Tarea de ejjemplo\",\n        fecha: Date.now(),\n      });\n      setEmail(\"\");\n      setPass(\"\");\n      setMensaje(\"\");\n      props.history.push(\"/admin\");\n    } catch (error) {\n      console.log(error);\n      setMensaje(error.message);\n    }\n  }, [email, pass, props.history]);\n\n  const iniciarSesion = React.useCallback(async () => {\n    try {\n      await auth.signInWithEmailAndPassword(email, pass);\n      setEmail(\"\");\n      setPass(\"\");\n      setMensaje(\"\");\n      props.history.push(\"/admin\");\n    } catch (error) {\n      setMensaje(error.message);\n      return;\n    }\n  }, [email, pass, props.history]);\n\n  //Funcion para validar los datos del formulario\n  const procesarDatos = (e) => {\n    e.preventDefault();\n    if (!email.trim()) {\n      setMensaje(\"Ingrese un email\");\n      return;\n    }\n    if (!pass.trim()) {\n      setMensaje(\"Ingrese una contraseña\");\n      return;\n    }\n    if (pass.length < 6) {\n      setMensaje(\"La contraseña debe tener al menos 6 caracteres\");\n      return;\n    }\n    setMensaje(\"\");\n    console.log(\"validando todo\");\n    if (esRegistro) {\n      registrarUsuario();\n    } else {\n      iniciarSesion();\n    }\n  };\n\n  return (\n    <div className=\"container mx-auto mt-10\">\n      <h3 className=\"text-center font-bold text-2xl mb-10\">\n        {esRegistro ? \"Registro de usuarios\" : \"Inicia sesión\"}\n      </h3>\n      <hr />\n      <form\n        onSubmit={procesarDatos}\n        className=\"mt-10 w-11/12 md:w-5/6 lg:w-3/5 xl:w-1/2 mx-auto\"\n      >\n        {mensaje.length > 0 ? (\n          <div className=\"p-4 bg-red-300 text-red-600 block w-3/4 mx-auto mb-4\">\n            {mensaje}\n          </div>\n        ) : null}\n        <input\n          type=\"email\"\n          placeholder=\"Ingrese un email\"\n          name=\"email\"\n          className=\"focus:outline-none bg-transparent text-xl border-b-2 border-blue-400 w-3/4 mx-auto mb-5 block\"\n          onChange={(e) => setEmail(e.target.value)}\n          value={email}\n        />\n        <input\n          type=\"password\"\n          placeholder=\"Ingrese su contraseña\"\n          name=\"password\"\n          className=\"focus:outline-none bg-transparent text-xl border-b-2 border-blue-400 w-3/4 mx-auto mb-5 block\"\n          onChange={(e) => setPass(e.target.value)}\n          value={pass}\n        />\n        <button\n          type=\"submit\"\n          className=\"block p-4 border-b-4 bg-gray-700 border-red-900 rounded text-white w-3/4 mb-5 mx-auto\"\n        >\n          {esRegistro ? \"Registrar\" : \"Acceder\"}\n        </button>\n        <button\n          type=\"button\"\n          onClick={() => setEsRegistro(!esRegistro)}\n          className=\"block p-3 border-b-4 bg-blue-500 border-blue-700 rounded text-white w-3/4 mx-auto\"\n        >\n          {esRegistro ? \"¿Ya tienes una cuenta?\" : \"¿No estas registrado?\"}\n        </button>\n      </form>\n    </div>\n  );\n};\n\nexport default withRouter(Login);\n"]},"metadata":{},"sourceType":"module"}